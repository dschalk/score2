
# The Game of Score
The front end works in the React frame work. The back end is a modified Haskell Wai WebSockets server, which is an extension of github.com/jaspervdj/websockets. It is up and running at [http://game.schalk.site](http://game.schalk.site) on a [Digital Ocean](www.digitalocean.com/?refcode=1d035c466e8d) droplet.

## Rules of "Score"
Four dice are rolled. The default die are two six-sided, one twelve-sided, and one twenty-sided die. The goal is to make the number "20" in two or three steps using addition, subtraction, multiplication, division, and/or concatenation.

If a player calls out "Score!", or clicks "SCORE" in the computer version, he or she must quickly demonstrate how to make the number "20". Failure to do so loses the player one point; success gains a point. Clicking "SCORE" starts a countdown which currently allows 30 seconds, which is more than enough time if you already know a solution.

If a player clicks "IMPOSSIBLE", a 60-second countdown begins. If no player clicks "SCORE" during the 60 seconds, the player who clicked "IMPOSSIBLE" gains one point. If a player clicks "SCORE" during the countdown and succeeds in making "20" within 30 seconds, the player who clicked "IMPOSSIBLE" loses two points. It is possible for the player who clicked "IMPOSSIBLE" to also click "SCORE". Making the number "20" within 30 seconds gains back one of the two points lost because the 60 second countdown was successfully interrupted.

In order to gain a point by making the number "20", a player must use a number generated by a previous computation. Numbers generated during game play are colored red.

Players start out in solitaire mode. Clicking "Group A" or "Group B" puts a player in competition with any other players who made the same choice. Clicking "Player Created" allows a player to start a new group, or to join one that another player created. Players can communicate by exchanging text messages in the chat box. Players can return to solitaire play by clicking "Go Private".

Students and anyone who wants to brush up on arithmetic are encouraged to look for mistakes in the computer generated lists of solutions. Does 15-(-5)=20 look right?. What about 2+(3_(4/(2/3)))=20? They are both correct. 4/(2/3) = 4_3/2 = 12/2 = 6; 3*6 = 18; and 18+2 = 20. You have to solve the innermost equations first, methodically working your way out

Players can easily change the dice and/or the goal. There is also a place to experiment. See how you can make '20' with 9, 9, 9, and 9 on the right side of the browser display, or click "CALCULATE" on the left side in order to see solutions to random rolls.

## How The Game Was Developed
by David Schalk

### Background
My son Alexander (a/k/a "Alex") taught me the game of score when he was in the fifth grade. We used four dice - two six-sided, one twelve-sided, and one twenty-sided - and a one-minute hour glass. There were three ways to gain a point. One way was to be the first to call out "Score!" and then quickly show how the number "20" could be made in two or three steps using addition, subtraction, multiplication, division, and/or concatenation. Another way is to call out "Impossible!" and turn over the hour glass. If the sand runs out before anyone can show a solution, you gain one point. If someone finds a solution before the time is up, that player gains a point and the player who called "Impossible!" loses two points.

I was curious about how many rolls actually were impossible to solve, so I wrote a PHP program to find them. Then I wrote a real time, multi-player Websockets version in Node.js. As I added features, I started seeing erratic performance due to events occurring out of order, but that was remedied by implementing promises. The server does not store data. The browsers keep score under the hood, periodically sending names and scores to the server which in turn broadcasts the scoreboard information to all players. I quit work on it when I decided to create a Haskell version, so it hasn't progressed past a beta version which is online at score.nodejitsu.com and available at github.com/dschalk/score.

### The Haskell Version
I started with the chat example at github.com/wai/wai-websockets. It is Jasper Van der Jeugt 's websockets adapted to the warp web server. The routine work of the chat server is receiving messages from individual browsers and broadcasting them to all participants. The server also parses sign-in messages to make sure the format is correct and there are no duplicate player names. The server keeps a list of participants in a Haskell programming language container called an 'MVar', and replaces the list with a new, up-to-date list whenever there is a disconnect, score change, group membership change, or a new sign-in.

[https://www.fpcomplete.com/user/dschalk/Websockets%20Game%20of%20Score](https://www.fpcomplete.com/user/dschalk/Websockets%20Game%20of%20Score) Game Details









